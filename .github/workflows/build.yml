name: Build
on:
    pull_request:

concurrency:
    group: build-${{ github.head_ref }}
    cancel-in-progress: true

defaults:
    run:
        shell: bash

jobs:
    build:
        runs-on: ubuntu-22.04
        timeout-minutes: 5
        steps:
            -   uses: actions/checkout@v4
            -   uses: actions/setup-node@v4
                with:
                    node-version-file: 'package.json'

            -   name: Install dependencies
                run: yarn install --silent --non-interactive --frozen-lockfile

            -   name: Build
                run: yarn run build

    test:
        runs-on: ubuntu-22.04
        timeout-minutes: 5
        steps:
            -   uses: actions/checkout@v4
            -   uses: actions/setup-node@v4
                with:
                    node-version-file: 'package.json'

            -   name: Install dependencies
                run: yarn install --silent --non-interactive --frozen-lockfile

            -   name: Test
                run: yarn test

    lint:
        runs-on: ubuntu-22.04
        timeout-minutes: 5
        steps:
            -   uses: actions/checkout@v4
            -   uses: actions/setup-node@v4
                with:
                    node-version-file: 'package.json'

            -   name: Install dependencies
                run: yarn install --silent --non-interactive --frozen-lockfile

            -   name: Lint
                run: yarn lint